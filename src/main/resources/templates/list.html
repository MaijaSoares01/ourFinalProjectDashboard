<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Candidates List</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<div class="container mt-4">
		<h2>Candidates List</h2>
		<!-- <a href="/candidates/add" class="btn btn-primary mb-3">Add New Candidate</a>-->

		<!-- Search Form-->
		<form th:action="@{candidates/search}" method="get" class="mb-3">
			<div class="row">

				<!-- kewyword search -->
				<div class="col-md-3">
					<input type="text" name="keyword" class="form-control"
						placeholder="Search" th:value="${keyword}" />
				</div>

				<!-- gender filter -->
				<div class="col-md-2">
					<select name="gender" class="form-control">
						<option value="">All Genders</option>
						<option th:each="genderOption : ${genderOptions}"
							th:value="${genderOption}" th:text="${genderOption}"
								th:selected="${genderOption == selectedGender}"></option>
					</select>
				</div>

				<!--visa status filer... -->
				<div class="col-md-2">
					<select name="visaStatus" class="form-control">
						<option value="">All Visa Statuses</option>
						<option th:each="visaStatusOption : ${visaStatusOptions}"
							th:value="${visaStatusOption}" th:text="${visaStatusOption}">
						</option>
					</select>
				</div>

				<!-- Profile filter -->
				<div class="col-md-2">
					<select name="profile" class="form-control">
						<option value="">All Profiles</option>
						<option th:each="profileOption : ${profileOptions}"
							th:value="${profileOption}" th:text="${profileOption}"</option>
					</select>
				</div>

				<!-- Rejection stage filter -->
				<div class="col-md-2">
					<select name="rejectionStage" class="form-control">
						<option value="">All Rejection Stages</option>
						<option th:each="stageOption : ${rejectionStageOptions}"
							th:value="${stageOption}" th:text="${stageOption}"</option>
					</select>
				</div>

			</div>

			<div class="row g-3 mt-2">
				<!-- Education filter -->
				<div class="col-md-2">
					<select name="education" class="form-control">
						<option value="">All universities/colleges</option>
						<option th:each="eduOption : ${educationOptions}"
							th:value="${eduOption}" th:text="${eduOption}"</option>
					</select>
				</div>

				<!-- Degree Filter -->
				<div class="col-md-2">
					<select name="degree" class="form-control">
						<option value="">All Degrees</option>
						<option th:each="degreeOption : ${degreeOptions}"
							th:value="${degreeOption}" th:text="${degreeOption}"></option>
					</select>
				</div>

				<!--  Tole Applied Filter -->
				<div class="col-md-3">
					<select name="roleApplied" class="form-control">
						<option value="">Academy</option>
						<option th:each="roleOption : ${roleOptions}"
							th:value="${roleOption.jobRoleName}"
							th:text="${roleOption.jobRoleName}"</option>
					</select>
				</div>

				<!-- Submit button -->
				<div class="col-md-1 d-flex align-items-end">
					<button type="submit" class="btn btn-secondary">Filter</button>
				</div>
			</div>
		</form>

		<div class="table-responsive">
			<table class="table table-striped">
				<thead>
					<tr>
						<th>ID</th>
						<th>Name</th>
						<th>Academy</th>
						<th>Location</th>
						<th>University</th>
						<th>Degree</th>
						<th>Grade</th>
						<th>Gender</th>
						<th>Visa Status</th>
						<th>Profile</th>
						<th>Interview Score</th>
						<th>Rejection Stage</th>
						</tr>
				</thead>
				<tbody>
					<tr th:each="candidate : ${candidates}">
						<td th:text="${candidate.candidateId}"></td>
						<td th:text="${candidate.candidateName}"></td>
						<td th:text="${candidate.roleApplied.jobRoleName}"></td>
						<td th:text="${candidate.location}"></td>
						<td th:text="${candidate.education}"></td>
						<td th:text="${candidate.degree}"></td>
						<td th:text="${candidate.grade}"></td>
						<td th:text="${candidate.gender}"></td>
						<td th:text="${candidate.visaStatus}"></td>
						<td th:text="${candidate.profile}"></td>
						<td th:text="${candidate.interviewScore}"></td>
						<td th:text="${candidate.rejectionStage}"></td>
						<!--  <td>
                            <a th:href="@{/candidates/edit/{id}(id=${candidate.candidateId})}" 
                               class="btn btn-warning btn-sm">Edit</a>
                            <form th:action="@{/candidates/delete/{id}(id=${candidate.candidateId})}" 
                                  method="post" style="display: inline;">
                                <button type="submit" class="btn btn-danger btn-sm" 
                                        onclick="return confirm('Are you sure you want to delete this candidate?')">
                                    Delete
                                </button>
                            </form>
                        </td>-->
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>