<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Edit Candidate</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h2>Edit Candidate</h2>
        <form th:action="@{/candidates/edit/{id}(id=${candidate.candidateId})}" 
              th:object="${candidate}" method="post">
            <input type="hidden" th:field="*{candidateId}">
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="candidateName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="candidateName" th:field="*{candidateName}" required>
                    </div>

                    <div class="mb-3">
                        <label for="roleApplied" class="form-label">Role Applied</label>
                        <select class="form-select" id="roleApplied" th:field="*{roleApplied}" required>
                            <option th:each="role : ${jobRoles}"
                                    th:value="${role.id}"
                                    th:text="${role.roleName}"
                                    th:selected="${role.id == candidate.roleApplied.id}">
                            </option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="location" class="form-label">Location</label>
                        <input type="text" class="form-control" id="location" th:field="*{location}">
                    </div>

                    <div class="mb-3">
                        <label for="education" class="form-label">Education</label>
                        <input type="text" class="form-control" id="education" th:field="*{education}">
                    </div>

                    <div class="mb-3">
                        <label for="degree" class="form-label">Degree</label>
                        <input type="text" class="form-control" id="degree" th:field="*{degree}">
                    </div>

                    <div class="mb-3">
                        <label for="grade" class="form-label">Grade</label>
                        <input type="text" class="form-control" id="grade" th:field="*{grade}">
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="gender" class="form-label">Gender</label>
                        <select class="form-select" id="gender" th:field="*{gender}" required>
                            <option th:each="gender : ${genders}"
                                    th:value="${gender}"
                                    th:text="${gender}"
                                    th:selected="${gender == candidate.gender}">
                            </option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="visaStatus" class="form-label">Visa Status</label>
                        <select class="form-select" id="visaStatus" th:field="*{visaStatus}">
                            <option th:each="status : ${visaStatuses}"
                                    th:value="${status}"
                                    th:text="${status}"
                                    th:selected="${status == candidate.visaStatus}">
                            </option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="profile" class="form-label">Profile</label>
                        <select class="form-select" id="profile" th:field="*{profile}" required>
                            <option th:each="profile : ${profiles}"
                                    th:value="${profile}"
                                    th:text="${profile}"
                                    th:selected="${profile == candidate.profile}">
                            </option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="interviewScore" class="form-label">Interview Score (1-5)</label>
                        <input type="number" class="form-control" id="interviewScore" 
                               th:field="*{interviewScore}" min="1" max="5">
                    </div>

                    <div class="mb-3">
                        <label for="rejectionStage" class="form-label">Rejection Stage</label>
                        <select class="form-select" id="rejectionStage" th:field="*{rejectionStage}">
                            <option value="">None</option>
                            <option th:each="stage : ${rejectionStages}"
                                    th:value="${stage}"
                                    th:text="${stage}"
                                    th:selected="${stage == candidate.rejectionStage}">
                            </option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Update Candidate</button>
                <a href="/candidates" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>